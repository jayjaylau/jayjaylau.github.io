(this["webpackJsonpmask-mask8"]=this["webpackJsonpmask-mask8"]||[]).push([[0],{56:function(e,t){},57:function(e,t){},58:function(e,t){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);for(var r,i,a,c,o,s,u=n(3),l=n.n(u),f=n(41),j=n.n(f),b=n(12),h=n.n(b),g=n(14),m=n(42),p=n(0),d=0,O=0,x=[],y=20,v=0;v<y;v++)x[v]=0;var M=!0,R=new Event("browsRaised"),w="webgl",P=1;function I(){return k.apply(this,arguments)}function k(){return(k=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=document.getElementById("video"),e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});case 3:return t=e.sent,o.srcObject=t,e.abrupt("return",new Promise((function(e){o.onloadedmetadata=function(){e(o)}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return L.apply(this,arguments)}function L(){return(L=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.estimateFaces(o);case 2:t=e.sent,i.drawImage(o,0,0,a,c,0,0,s.width,s.height),t.length>0&&t.forEach((function(e){var t=e.scaledMesh;x[d]=t[257][1]-t[443][1],x[d]>O+.5?(i.fillStyle="#00ff00",M&&(M=!1,document.dispatchEvent(R))):(i.fillStyle="#ffffff",M=!0),++d>=y&&(d=0),O=0;for(var n=0;n<y;n++)O+=x[n];O/=y})),requestAnimationFrame(T);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.Yb(w);case 2:return e.next=4,I();case 4:return o.play(),a=o.videoWidth,c=o.videoHeight,o.width=a,o.height=c,(s=document.getElementById("output")).width=a/4,s.height=c/4,document.querySelector(".canvas-wrapper").style="width: ".concat(a,"px; height: ").concat(c,"px"),(i=s.getContext("2d")).translate(s.width,0),i.scale(-1,1),i.fillStyle="#32EEDB",i.strokeStyle="#32EEDB",i.lineWidth=.5,e.next=22,m.a({maxFaces:P});case 22:r=e.sent,T();case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=n(13),E=n(7),C=function(e){var t=e.brightness,n=e.color;return Object(E.jsx)("rectAreaLight",{width:3,height:3,color:n,intensity:t,position:[-2,0,5],lookAt:[0,0,0],penumbra:1,castShadow:!0})},_=function(e){var t=e.brightness,n=e.color;return Object(E.jsx)("rectAreaLight",{width:3,height:3,intensity:t,color:n,position:[2,1,4],lookAt:[0,0,0],penumbra:2,castShadow:!0})},B=function(e){var t=e.brightness,n=e.color;return Object(E.jsx)("rectAreaLight",{width:2,height:2,intensity:t,color:n,position:[1,4,-2],rotation:[0,180,0],castShadow:!0})},F=n(10),G=n(43),W=n.p+"static/media/char_idle.b764698b.png",N=n.p+"static/media/char_blockL.cc6e41f4.png",U=n.p+"static/media/char_blockR.1fa0758d.png",D=n(1),q=(new D.TextureLoader).load(W),J=(new D.TextureLoader).load(N),Y=(new D.TextureLoader).load(U),z="splash",H="left",X=Object(G.a)((function(e){return{appState:z,setAppState:function(t){return e((function(e){return{appState:t}}))},timerRunning:!1,setTimerRunning:function(t){return e((function(e){return{timerRunning:t}}))},gaugeRunning:!1,setGaugeRunning:function(t){return e((function(e){return{gaugeRunning:t}}))},gaugeColor:"hotpink",setGaugeColor:function(t){return e((function(e){return{gaugeColor:t}}))},rapidFire:!1,setRapidFire:function(t){return e((function(e){return{rapidFire:t}}))},ballReady:!0,setBallReady:function(t){return e((function(e){return{ballReady:t}}))},gaugePosition:H,setGaugePosition:function(t){return e((function(e){return{gaugePosition:t}}))},timeLeft:30,resetTime:function(){return e((function(e){return{timeLeft:30}}))},decTime:function(){e((function(e){return{timeLeft:(e.timeLeft-.1).toFixed(1)}}))},points:0,resetPoints:function(){return e((function(e){return{points:e.points=0}}))},inc:function(){return e((function(e){return{points:e.points+2}}))},charTexture:q,setCharTexture:function(t){return e((function(e){return{charTexture:t}}))}}})),K=n(66),Q="playing",V="end",Z=function(e){var t=X((function(e){return[e.timeLeft,e.decTime,e.points,e.appState,e.setAppState,e.setGaugeRunning]})),n=Object(F.a)(t,6),r=n[0],i=n[1],a=n[2],c=n[3],o=n[4],s=n[5];return function(e,t){var n=Object(u.useRef)();Object(u.useEffect)((function(){n.current=e})),Object(u.useEffect)((function(){if(null!==t){var e=setInterval((function(){"undefined"!==typeof(null===n||void 0===n?void 0:n.current)&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){c===Q&&(i(),r<=.1&&(o(V),s(!1)))}),100),Object(E.jsx)("group",{position:[.5,3,0],children:Object(E.jsx)(K.a,{fontSize:.7,color:"black",anchorX:"left",anchorY:"bottom",outlineWidth:.05,outlineColor:"#ffffff",children:"".concat(r,"\n").concat(a)})})},$=n(11),ee=n(16),te=0;function ne(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=X((function(e){return[e.inc,e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.setRapidFire,e.rapidFire]})),i=Object(F.a)(r,6),a=i[0],c=i[1],o=i[2],s=i[3],l=i[4],f=i[5],j=Object(A.c)(ee.a,"/masketball_BallAnimW.glb"),b=j.nodes,h=j.materials,g=j.animations,m=Object(u.useRef)(),p=Object(u.useState)((function(){return new D.AnimationMixer})),d=Object(F.a)(p,1)[0];return Object(u.useEffect)((function(){return m.current={idle:d.clipAction(g[0],n.current)},m.current.idle.setLoop(D.LoopOnce),function(){return g.forEach((function(e){return d.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,t){o&&!f&&"center"===c&&oe>=0&&(m.current.idle.reset(),m.current.idle.play(),oe=-1,s("green"),setTimeout((function(){s("hotpink")}),200),setTimeout((function(){a()}),750),2===++te&&(s("lightblue"),setTimeout((function(){s("lightblue")}),201),l(!0),le=!1,ue=!1,setTimeout((function(){l(!1),te=0,ue=!0}),3e3))),d.update(t)})),Object(E.jsx)("group",Object($.a)(Object($.a)({ref:n},t),{},{dispose:null,children:Object(E.jsx)("mesh",{name:"ball",geometry:b.ball.geometry,material:h.ball,rotation:[Math.PI/2,Math.PI/2,0]})}))}function re(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=X((function(e){return[e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.rapidFire,e.setCharTexture]})),i=Object(F.a)(r,5),a=i[0],c=i[1],o=i[2],s=i[3],l=i[4],f=Object(A.c)(ee.a,"/masketball_BallAnim3.glb"),j=f.nodes,b=f.materials,h=f.animations,g=Object(u.useRef)(),m=Object(u.useState)((function(){return new D.AnimationMixer})),p=Object(F.a)(m,1)[0];return Object(u.useEffect)((function(){return g.current={idle:p.clipAction(h[0],n.current)},g.current.idle.setLoop(D.LoopOnce),function(){return h.forEach((function(e){return p.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,t){c&&!s&&"left"===a&&oe>=0&&(g.current.idle.reset(),g.current.idle.play(),oe=-1,o("red"),setTimeout((function(){o("hotpink")}),200),setTimeout((function(){l(J)}),200),setTimeout((function(){l(q)}),400),te=0),p.update(t)})),Object(E.jsxs)("group",Object($.a)(Object($.a)({ref:n},t),{},{dispose:null,children:[Object(E.jsx)("group",{position:[-.83,28.21,154.68],children:Object(E.jsx)("group",{rotation:[-.02,0,0],scale:[1,1,1],children:Object(E.jsx)("group",{rotation:[0,Math.PI/2,0]})})}),Object(E.jsx)("mesh",{name:"ball",material:b.ball,geometry:j.ball.geometry,rotation:[-Math.PI/2,-Math.PI/2,0],scale:[1,1,1]})]}))}function ie(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=X((function(e){return[e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.rapidFire,e.setCharTexture]})),i=Object(F.a)(r,5),a=i[0],c=i[1],o=i[2],s=i[3],l=i[4],f=Object(A.c)(ee.a,"/masketball_BallAnimLblock.glb"),j=f.nodes,b=f.materials,h=f.animations,g=Object(u.useRef)(),m=Object(u.useState)((function(){return new D.AnimationMixer})),p=Object(F.a)(m,1)[0];return Object(u.useEffect)((function(){return g.current={idle:p.clipAction(h[0],n.current)},g.current.idle.setLoop(D.LoopOnce),function(){return h.forEach((function(e){return p.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,t){c&&!s&&"right"===a&&oe>=0&&(g.current.idle.reset(),g.current.idle.play(),oe=-1,o("red"),setTimeout((function(){o("hotpink")}),200),setTimeout((function(){l(Y)}),200),setTimeout((function(){l(q)}),400),te=0),p.update(t)})),Object(E.jsxs)("group",Object($.a)(Object($.a)({ref:n},t),{},{dispose:null,children:[Object(E.jsx)("group",{position:[-.83,28.21,154.68],children:Object(E.jsx)("group",{rotation:[-.02,0,0],scale:[1,1,1],children:Object(E.jsx)("group",{rotation:[0,Math.PI/2,0]})})}),Object(E.jsx)("mesh",{name:"ball",material:b.ball,geometry:j.ball.geometry,rotation:[-Math.PI/2,-Math.PI/2,0],scale:[1,1,1]})]}))}function ae(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=X((function(e){return[e.inc,e.rapidFire]})),i=Object(F.a)(r,2),a=i[0],c=i[1],o=Object(A.c)(ee.a,"/masketball_BallAnimW.glb"),s=o.nodes,l=o.materials,f=o.animations,j=Object(u.useRef)(),b=Object(u.useState)((function(){return new D.AnimationMixer})),h=Object(F.a)(b,1)[0];return Object(u.useEffect)((function(){return j.current={idle:h.clipAction(f[0],n.current)},j.current.idle.setLoop(D.LoopOnce),function(){return f.forEach((function(e){return h.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,n){c&&oe===t.toast&&(j.current.idle.reset(),j.current.idle.play(),oe=-1,setTimeout((function(){a()}),750)),h.update(n)})),Object(E.jsx)("group",Object($.a)(Object($.a)({ref:n},t),{},{dispose:null,children:Object(E.jsx)("mesh",{name:"ball",geometry:s.ball.geometry,material:l.ball,rotation:[Math.PI/2,Math.PI/2,0]})}))}var ce=0,oe=-1;function se(){return new Array(5).fill().map((function(e,t){return Object(E.jsx)(ae,{toast:t,scale:[.1,.1,.1],rotation:[0,Math.PI,0]},t)}))}var ue=!0,le=!1;function fe(){var e=function(e){le||(oe=ce,++ce>=5&&(ce=0),ue&&(le=!0,setTimeout((function(){le=!1}),1e3)))};return l.a.useEffect((function(){return document.addEventListener("browsRaised",e),function(){document.addEventListener("browsRaised",e)}}),[]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(re,{toast:0,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(E.jsx)(ie,{toast:0,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(E.jsx)(ne,{toast:1,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(E.jsx)(se,{})]})}var je=n(65),be="left",he="center",ge="right",me=function(e){var t=X((function(e){return[e.setGaugePosition,e.gaugePosition,e.gaugeRunning,e.gaugeColor,e.rapidFire]})),n=Object(F.a)(t,5),r=n[0],i=n[1],a=n[2],c=n[3],o=n[4],s=Object(u.useRef)();return Object(A.b)((function(e){if(!0===a){if(o)s.current=0;else{var t=e.clock.getElapsedTime();s.current=Math.sin(2*t)}i!==he&&s.current>-.5&&s.current<.5?r(he):i!==be&&s.current>=.5?r(be):i!==ge&&s.current<=-.5&&r(ge)}})),Object(E.jsxs)("group",{ref:s,position:[0,0,1],children:[Object(E.jsx)(je.a,{args:[1.5,16],children:Object(E.jsx)(je.b,{args:[.4,.4],rotation:[0,0,.8],position:[0,1.45,.1],children:Object(E.jsx)("meshBasicMaterial",{attach:"material",color:c})})}),Object(E.jsxs)(je.a,{args:[1.1,16],position:[0,0,.2],rotation:[0,0,s.current],children:[Object(E.jsx)("meshBasicMaterial",{attach:"material",color:"blue"}),Object(E.jsx)(je.b,{args:[.2,.2],rotation:[0,0,.8],position:[0,1.45,.1],children:Object(E.jsx)("meshBasicMaterial",{attach:"material",color:"blue"})})]})]})},pe=n.p+"static/media/UI_Launch_BG.a0451e79.jpg",de=n.p+"static/media/UI_Launch_Inactive.78a02689.png",Oe=n.p+"static/media/UI_PlayAgain_Inactive.b3defc2e.png",xe="playing",ye="end",ve=function(e){var t=X((function(e){return[e.setAppState,e.appState,e.setTimerRunning,e.resetTime,e.resetPoints,e.setGaugeRunning]})),n=Object(F.a)(t,6),r=n[0],i=n[1],a=n[2],c=n[3],o=n[4],s=n[5],u=function(){r(xe),c(),o(),a(!0),s(!0)};return i===xe?null:i===ye?Object(E.jsx)("div",{className:"splash",children:Object(E.jsx)("img",{className:"button",src:Oe,alt:"splash screen",onClick:function(){return u()}})}):Object(E.jsxs)("div",{className:"splash",children:[Object(E.jsx)("img",{src:pe,alt:"splash screen"}),Object(E.jsx)("img",{className:"button",src:de,alt:"splash screen",onClick:function(){return u()}})]})};function Me(e){var t=Object(u.useRef)(),n=Object(A.c)(ee.a,"./m_Scene.glb"),r=n.nodes,i=n.materials;return Object(E.jsxs)("group",Object($.a)(Object($.a)({ref:t},e),{},{dispose:null,children:[Object(E.jsxs)("group",{position:[-.11,.54,-3.87],rotation:[Math.PI/2,0,Math.PI],scale:[.01,.01,.01],children:[Object(E.jsxs)("group",{position:[-10.26,-14.92,-52.54],rotation:[0,0,Math.PI],children:[Object(E.jsx)("mesh",{geometry:r.Mesh002.geometry,material:i.RoyalBlue}),Object(E.jsx)("mesh",{geometry:r.Mesh002_1.geometry,material:i.White}),Object(E.jsx)("mesh",{geometry:r.Mesh002_2.geometry,material:i.BG_logo})]}),Object(E.jsxs)("group",{position:[-10.64,-12.98,-18.84],rotation:[0,0,-Math.PI/2],children:[Object(E.jsx)("mesh",{geometry:r.Mesh.geometry,material:i.RoyalBlue}),Object(E.jsx)("mesh",{geometry:r.Mesh_1.geometry,material:i["RoyalBlue.001"]}),Object(E.jsx)("mesh",{geometry:r.net.geometry,material:i.White,position:[30.09,0,7.31]})]})]}),Object(E.jsx)("mesh",{geometry:r.floor.geometry,material:i.floor,position:[0,-.35,-1.76],rotation:[Math.PI/2,0,0],scale:[.01,.01,.01]}),Object(E.jsx)("mesh",{geometry:r.bg.geometry,material:i.bg,position:[0,1.19,-2.07],rotation:[Math.PI/2,0,1.61],scale:[.01,.01,.01]})]}))}var Re=n(67);function we(e){var t=X((function(e){return[e.charTexture]})),n=Object(F.a)(t,1)[0],r=Object(u.useRef)(),i=Object(Re.a)("./mblank_CharStill.glb").nodes;return Object(E.jsx)("group",Object($.a)(Object($.a)({ref:r},e),{},{dispose:null,children:Object(E.jsx)("mesh",{geometry:i.char_idle.geometry,position:[0,40.71,274.33],children:Object(E.jsx)("meshStandardMaterial",{attach:"material",map:n,transparent:!0})})}))}n(63);function Pe(){return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(ve,{}),Object(E.jsxs)(A.a,{camera:{position:[0,2,4]},onCreated:function(e){e.camera.lookAt(0,2,0)},children:[Object(E.jsx)(Z,{}),Object(E.jsx)("ambientLight",{intensity:.5}),Object(E.jsx)(C,{brightness:5.6,color:"#ffbdf4"}),Object(E.jsx)(_,{brightness:2.6,color:"#bdefff"}),Object(E.jsx)(B,{brightness:54,color:"#fff"}),Object(E.jsxs)(u.Suspense,{fallback:null,children:[Object(E.jsx)(fe,{}),Object(E.jsx)(Me,{scale:[10,10,10]}),Object(E.jsx)(we,{scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(E.jsx)(me,{})]})]})]})}!function(){S.apply(this,arguments)}();var Ie=document.getElementById("root");j.a.render(Object(E.jsx)(u.StrictMode,{children:Object(E.jsx)(Pe,{})}),Ie)}},[[64,1,2]]]);
//# sourceMappingURL=main.e032b1b4.chunk.js.map