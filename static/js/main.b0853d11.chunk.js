(this["webpackJsonpmask-mask8"]=this["webpackJsonpmask-mask8"]||[]).push([[0],{65:function(e,t){},66:function(e,t){},67:function(e,t){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);for(var r,i,c,a,o,s,u=n(4),l=n.n(u),f=n(33),b=n.n(f),j=n(13),d=n.n(j),h=n(14),p=n(51),g=n(0),m=0,O=0,x=[],v=20,y=0;y<v;y++)x[y]=0;var P=!0,R=1.5,w=new Event("browsRaised"),M=new Event("trackingReady"),k="webgl",I=1;function A(){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=document.getElementById("video"),e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});case 3:return t=e.sent,o.srcObject=t,e.abrupt("return",new Promise((function(e){o.onloadedmetadata=function(){e(o)}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return T.apply(this,arguments)}function T(){return(T=Object(h.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.estimateFaces(o);case 2:t=e.sent,n=s.width/2.5,i.save(),i.beginPath(),i.arc(s.width/2,s.height/2,n,0,2*Math.PI),i.strokeStyle="blue",i.stroke(),i.clip(),i.drawImage(o,0,0,c,a,0,0,s.width,s.height),i.restore(),i.stroke(),t.length>0&&t.forEach((function(e){var t=e.scaledMesh;x[m]=t[257][1]-t[443][1],x[m]>O+.5?(i.fillStyle="#00ff00",P&&(P=!1,document.dispatchEvent(w))):(i.fillStyle="#ffffff",P=!0),++m>=v&&(m=0),O=0;for(var n=0;n<v;n++)O+=x[n];O/=v})),requestAnimationFrame(L);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(h.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Yb(k);case 2:return e.next=4,A();case 4:return o.play(),c=o.videoWidth,a=o.videoHeight,o.width=c,o.height=a,(s=document.getElementById("output")).width=c/R,s.height=a/R,document.querySelector(".canvas-wrapper").style="width: ".concat(c,"px; height: ").concat(a,"px"),(i=s.getContext("2d")).translate(s.width,0),i.scale(-1,1),i.fillStyle="#32EEDB",i.strokeStyle="blue",i.lineWidth=.5,e.next=22,p.a({maxFaces:I});case 22:r=e.sent,document.dispatchEvent(M),L();case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=n(17),F=n(8),C=function(e){var t=e.brightness,n=e.color;return Object(F.jsx)("rectAreaLight",{width:3,height:3,color:n,intensity:t,position:[-2,0,5],lookAt:[0,0,0],penumbra:1,castShadow:!0})},B=function(e){var t=e.brightness,n=e.color;return Object(F.jsx)("rectAreaLight",{width:3,height:3,intensity:t,color:n,position:[2,1,4],lookAt:[0,0,0],penumbra:2,castShadow:!0})},G=function(e){var t=e.brightness,n=e.color;return Object(F.jsx)("rectAreaLight",{width:2,height:2,intensity:t,color:n,position:[1,4,-2],rotation:[0,180,0],castShadow:!0})},N=n(12),U=n(52),W=n.p+"static/media/char_idle.b764698b.png",q=n.p+"static/media/char_blockL.cc6e41f4.png",D=n.p+"static/media/char_blockR.fb28e20b.png",J=n(2),Y=(new J.TextureLoader).load(W),z=(new J.TextureLoader).load(q),H=(new J.TextureLoader).load(D),X="splash",K="left",Q=Object(U.a)((function(e){return{appState:X,setAppState:function(t){return e((function(e){return{appState:t}}))},timerRunning:!1,setTimerRunning:function(t){return e((function(e){return{timerRunning:t}}))},gaugeRunning:!1,setGaugeRunning:function(t){return e((function(e){return{gaugeRunning:t}}))},gaugeColor:"hotpink",setGaugeColor:function(t){return e((function(e){return{gaugeColor:t}}))},rapidFire:!1,setRapidFire:function(t){return e((function(e){return{rapidFire:t}}))},ballReady:!0,setBallReady:function(t){return e((function(e){return{ballReady:t}}))},gaugePosition:K,setGaugePosition:function(t){return e((function(e){return{gaugePosition:t}}))},timeLeft:24,resetTime:function(){return e((function(e){return{timeLeft:24}}))},decTime:function(){e((function(e){return{timeLeft:(e.timeLeft-.1).toFixed(1)}}))},points:0,resetPoints:function(){return e((function(e){return{points:e.points=0}}))},inc:function(){return e((function(e){return{points:e.points+2}}))},charTexture:Y,setCharTexture:function(t){return e((function(e){return{charTexture:t}}))},scorePActive:0,setScorePActive:function(t){return e((function(e){return{scorePActive:t}}))},rFirePActive:0,setRFirePActive:function(t){return e((function(e){return{rFirePActive:t}}))}}})),V=n(75),Z="playing",$="end",ee=function(e){var t=Q((function(e){return[e.timeLeft,e.decTime,e.points,e.appState,e.setAppState,e.setGaugeRunning]})),n=Object(N.a)(t,6),r=n[0],i=n[1],c=n[2],a=n[3],o=n[4],s=n[5];return function(e,t){var n=Object(u.useRef)();Object(u.useEffect)((function(){n.current=e})),Object(u.useEffect)((function(){if(null!==t){var e=setInterval((function(){"undefined"!==typeof(null===n||void 0===n?void 0:n.current)&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){a===Z&&(i(),r<=.1&&(o($),s(!1)))}),100),Object(F.jsx)("group",{position:[.5,3,0],children:Object(F.jsx)(V.a,{fontSize:.7,color:"black",anchorX:"left",anchorY:"bottom",outlineWidth:.05,outlineColor:"#ffffff",children:"".concat(r,"\n").concat(c)})})},te=n(10),ne=n(21),re=0;function ie(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=Q((function(e){return[e.inc,e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.setRapidFire,e.rapidFire,e.setScorePActive,e.setRFirePActive]})),i=Object(N.a)(r,8),c=i[0],a=i[1],o=i[2],s=i[3],l=i[4],f=i[5],b=i[6],j=i[7],d=Object(_.c)(ne.a,"/masketball_BallAnimW.glb"),h=d.nodes,p=d.materials,g=d.animations,m=Object(u.useRef)(),O=Object(u.useState)((function(){return new J.AnimationMixer})),x=Object(N.a)(O,1)[0];return Object(u.useEffect)((function(){return m.current={idle:x.clipAction(g[0],n.current)},m.current.idle.setLoop(J.LoopOnce),function(){return g.forEach((function(e){return x.uncacheClip(e)}))}}),[]),Object(_.b)((function(e,t){o&&!f&&"center"===a&&ue>=0&&(m.current.idle.reset(),m.current.idle.play(),ue=-1,s("green"),b(1),setTimeout((function(){s("hotpink")}),200),setTimeout((function(){c(),b(0)}),750),2===++re&&(s("lightblue"),setTimeout((function(){s("lightblue")}),201),l(!0),j(1),be=!1,fe=!1,setTimeout((function(){l(!1),re=0,fe=!0,j(0)}),3e3))),x.update(t)})),Object(F.jsx)("group",Object(te.a)(Object(te.a)({ref:n},t),{},{dispose:null,children:Object(F.jsx)("mesh",{name:"ball",geometry:h.ball.geometry,material:p.ball,rotation:[Math.PI/2,Math.PI/2,0]})}))}function ce(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=Q((function(e){return[e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.rapidFire,e.setCharTexture]})),i=Object(N.a)(r,5),c=i[0],a=i[1],o=i[2],s=i[3],l=i[4],f=Object(_.c)(ne.a,"/masketball_BallAnim3.glb"),b=f.nodes,j=f.materials,d=f.animations,h=Object(u.useRef)(),p=Object(u.useState)((function(){return new J.AnimationMixer})),g=Object(N.a)(p,1)[0];return Object(u.useEffect)((function(){return h.current={idle:g.clipAction(d[0],n.current)},h.current.idle.setLoop(J.LoopOnce),function(){return d.forEach((function(e){return g.uncacheClip(e)}))}}),[]),Object(_.b)((function(e,t){a&&!s&&"left"===c&&ue>=0&&(h.current.idle.reset(),h.current.idle.play(),ue=-1,o("red"),setTimeout((function(){o("hotpink")}),200),setTimeout((function(){l(z)}),200),setTimeout((function(){l(Y)}),400),re=0),g.update(t)})),Object(F.jsxs)("group",Object(te.a)(Object(te.a)({ref:n},t),{},{dispose:null,children:[Object(F.jsx)("group",{position:[-.83,28.21,154.68],children:Object(F.jsx)("group",{rotation:[-.02,0,0],scale:[1,1,1],children:Object(F.jsx)("group",{rotation:[0,Math.PI/2,0]})})}),Object(F.jsx)("mesh",{name:"ball",material:j.ball,geometry:b.ball.geometry,rotation:[-Math.PI/2,-Math.PI/2,0],scale:[1,1,1]})]}))}function ae(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=Q((function(e){return[e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.rapidFire,e.setCharTexture]})),i=Object(N.a)(r,5),c=i[0],a=i[1],o=i[2],s=i[3],l=i[4],f=Object(_.c)(ne.a,"/masketball_BallAnimLblock.glb"),b=f.nodes,j=f.materials,d=f.animations,h=Object(u.useRef)(),p=Object(u.useState)((function(){return new J.AnimationMixer})),g=Object(N.a)(p,1)[0];return Object(u.useEffect)((function(){return h.current={idle:g.clipAction(d[0],n.current)},h.current.idle.setLoop(J.LoopOnce),function(){return d.forEach((function(e){return g.uncacheClip(e)}))}}),[]),Object(_.b)((function(e,t){a&&!s&&"right"===c&&ue>=0&&(h.current.idle.reset(),h.current.idle.play(),ue=-1,o("red"),setTimeout((function(){o("hotpink")}),200),setTimeout((function(){l(H)}),200),setTimeout((function(){l(Y)}),400),re=0),g.update(t)})),Object(F.jsxs)("group",Object(te.a)(Object(te.a)({ref:n},t),{},{dispose:null,children:[Object(F.jsx)("group",{position:[-.83,28.21,154.68],children:Object(F.jsx)("group",{rotation:[-.02,0,0],scale:[1,1,1],children:Object(F.jsx)("group",{rotation:[0,Math.PI/2,0]})})}),Object(F.jsx)("mesh",{name:"ball",material:j.ball,geometry:b.ball.geometry,rotation:[-Math.PI/2,-Math.PI/2,0],scale:[1,1,1]})]}))}function oe(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=Q((function(e){return[e.inc,e.rapidFire]})),i=Object(N.a)(r,2),c=i[0],a=i[1],o=Object(_.c)(ne.a,"/masketball_BallAnimW.glb"),s=o.nodes,l=o.materials,f=o.animations,b=Object(u.useRef)(),j=Object(u.useState)((function(){return new J.AnimationMixer})),d=Object(N.a)(j,1)[0];return Object(u.useEffect)((function(){return b.current={idle:d.clipAction(f[0],n.current)},b.current.idle.setLoop(J.LoopOnce),function(){return f.forEach((function(e){return d.uncacheClip(e)}))}}),[]),Object(_.b)((function(e,n){a&&ue===t.toast&&(b.current.idle.reset(),b.current.idle.play(),ue=-1,setTimeout((function(){c()}),750)),d.update(n)})),Object(F.jsx)("group",Object(te.a)(Object(te.a)({ref:n},t),{},{dispose:null,children:Object(F.jsx)("mesh",{name:"ball",geometry:s.ball.geometry,material:l.ball,rotation:[Math.PI/2,Math.PI/2,0]})}))}var se=0,ue=-1;function le(){return new Array(5).fill().map((function(e,t){return Object(F.jsx)(oe,{toast:t,scale:[.1,.1,.1],rotation:[0,Math.PI,0]},t)}))}var fe=!0,be=!1;function je(){var e=function(e){be||(ue=se,++se>=5&&(se=0),fe&&(be=!0,setTimeout((function(){be=!1}),1e3)))};return l.a.useEffect((function(){return document.addEventListener("browsRaised",e),function(){document.addEventListener("browsRaised",e)}}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ce,{toast:0,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(F.jsx)(ae,{toast:0,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(F.jsx)(ie,{toast:1,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(F.jsx)(le,{})]})}var de=n(74),he="left",pe="center",ge="right",me=function(e){var t=Q((function(e){return[e.setGaugePosition,e.gaugePosition,e.gaugeRunning,e.gaugeColor,e.rapidFire]})),n=Object(N.a)(t,5),r=n[0],i=n[1],c=n[2],a=n[3],o=n[4],s=Object(u.useRef)();return Object(_.b)((function(e){if(!0===c){if(o)s.current=0;else{var t=e.clock.getElapsedTime();s.current=Math.sin(2*t)}i!==pe&&s.current>-.5&&s.current<.5?r(pe):i!==he&&s.current>=.5?r(he):i!==ge&&s.current<=-.5&&r(ge)}})),Object(F.jsxs)("group",{ref:s,position:[0,0,1],children:[Object(F.jsx)(de.a,{args:[1.5,64],children:Object(F.jsx)(de.b,{args:[.4,.4],rotation:[0,0,.8],position:[0,1.45,.1],children:Object(F.jsx)("meshBasicMaterial",{attach:"material",color:a})})}),Object(F.jsxs)(de.a,{args:[1.1,64],position:[0,0,.2],rotation:[0,0,s.current],children:[Object(F.jsx)("meshBasicMaterial",{attach:"material",color:"blue"}),Object(F.jsx)(de.b,{args:[.2,.2],rotation:[0,0,.8],position:[0,1.45,.1],children:Object(F.jsx)("meshBasicMaterial",{attach:"material",color:"blue"})})]})]})},Oe=n.p+"static/media/UI_Launch_BG.f2ab948a.jpg",xe=n.p+"static/media/UI_Launch_Inactive.073edc2d.png",ve=n.p+"static/media/UI_PlayAgain_Inactive.b3defc2e.png",ye=n.p+"static/media/UI_Loading.93cf17ce.png",Pe="playing",Re="end",we=function(e){var t=Q((function(e){return[e.setAppState,e.appState,e.setTimerRunning,e.resetTime,e.resetPoints,e.setGaugeRunning]})),n=Object(N.a)(t,6),r=n[0],i=n[1],c=n[2],a=n[3],o=n[4],s=n[5],f=Object(u.useState)(!1),b=Object(N.a)(f,2),j=b[0],d=b[1],h=function(e){d(!0)};l.a.useEffect((function(){return document.addEventListener("trackingReady",h),function(){document.addEventListener("trackingReady",h)}}),[]);var p=function(){r(Pe),a(),o(),c(!0),s(!0)};return i===Pe?null:i===Re?Object(F.jsx)("div",{className:"splash",children:Object(F.jsx)("img",{className:"button",src:ve,alt:"splash screen",onClick:function(){return p()}})}):Object(F.jsxs)("div",{className:"splash",children:[Object(F.jsx)("img",{src:Oe,alt:"splash screen"}),j?Object(F.jsx)("img",{className:"button",src:xe,alt:"splash screen",onClick:function(){return p()}}):Object(F.jsx)("img",{className:"button",src:ye,alt:"splash screen"})]})},Me=n.p+"static/media/UI_Score_Graphic.c4b7c98b.png",ke=n(26),Ie=function(e){var t=Q((function(e){return[e.scorePActive]})),n=Object(N.a)(t,1)[0],r=Object(ke.useSpring)({spring:n,config:{mass:5,tension:800,friction:50,precision:1e-4}}).spring,i=r.to([0,1],["0%","120%"]),c=r.to([0,1],[0,1]);return Object(F.jsx)("div",{className:"splash",children:Object(F.jsx)(ke.animated.img,{src:Me,alt:"score!",style:{opacity:c,width:i}})})},Ae=n.p+"static/media/UI_RapidFire_Graphic.02bec561.png",Se=function(e){var t=Q((function(e){return[e.rFirePActive]})),n=Object(N.a)(t,1)[0],r=Object(ke.useSpring)({spring:n,config:{mass:5,tension:800,friction:50,precision:1e-4}}).spring,i=r.to([0,1],["0%","120%"]),c=r.to([0,1],[0,1]);return Object(F.jsx)("div",{className:"splash",children:Object(F.jsx)(ke.animated.img,{src:Ae,alt:"Rapid Fire!",style:{opacity:c,width:i}})})};function Le(e){var t=Object(u.useRef)(),n=Object(_.c)(ne.a,"./m_Scene.glb"),r=n.nodes,i=n.materials;return Object(F.jsxs)("group",Object(te.a)(Object(te.a)({ref:t},e),{},{dispose:null,children:[Object(F.jsxs)("group",{position:[-.11,.54,-3.87],rotation:[Math.PI/2,0,Math.PI],scale:[.01,.01,.01],children:[Object(F.jsxs)("group",{position:[-10.26,-14.92,-52.54],rotation:[0,0,Math.PI],children:[Object(F.jsx)("mesh",{geometry:r.Mesh002.geometry,material:i.RoyalBlue}),Object(F.jsx)("mesh",{geometry:r.Mesh002_1.geometry,material:i.White}),Object(F.jsx)("mesh",{geometry:r.Mesh002_2.geometry,material:i.BG_logo})]}),Object(F.jsxs)("group",{position:[-10.64,-12.98,-18.84],rotation:[0,0,-Math.PI/2],children:[Object(F.jsx)("mesh",{geometry:r.Mesh.geometry,material:i.RoyalBlue}),Object(F.jsx)("mesh",{geometry:r.Mesh_1.geometry,material:i["RoyalBlue.001"]}),Object(F.jsx)("mesh",{geometry:r.net.geometry,material:i.White,position:[30.09,0,7.31]})]})]}),Object(F.jsx)("mesh",{geometry:r.floor.geometry,material:i.floor,position:[0,-.35,-1.76],rotation:[Math.PI/2,0,0],scale:[.01,.01,.01]}),Object(F.jsx)("mesh",{geometry:r.bg.geometry,material:i.bg,position:[0,1.19,-2.07],rotation:[Math.PI/2,0,1.61],scale:[.01,.01,.01]})]}))}var Te=n(76);function Ee(e){var t=Q((function(e){return[e.charTexture]})),n=Object(N.a)(t,1)[0],r=Object(u.useRef)(),i=Object(Te.a)("./mblank_CharStill.glb").nodes;return Object(F.jsx)("group",Object(te.a)(Object(te.a)({ref:r},e),{},{dispose:null,children:Object(F.jsx)("mesh",{geometry:i.char_idle.geometry,position:[0,40.71,274.33],children:Object(F.jsx)("meshStandardMaterial",{attach:"material",map:n,transparent:!0})})}))}n(72);function _e(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(we,{}),Object(F.jsx)(Ie,{}),Object(F.jsx)(Se,{}),Object(F.jsxs)(_.a,{camera:{position:[0,2,4]},onCreated:function(e){e.camera.lookAt(0,2,0)},children:[Object(F.jsx)(ee,{}),Object(F.jsx)("ambientLight",{intensity:.5}),Object(F.jsx)(C,{brightness:5.6,color:"#ffbdf4"}),Object(F.jsx)(B,{brightness:2.6,color:"#bdefff"}),Object(F.jsx)(G,{brightness:54,color:"#fff"}),Object(F.jsxs)(u.Suspense,{fallback:null,children:[Object(F.jsx)(je,{}),Object(F.jsx)(Le,{scale:[10,10,10]}),Object(F.jsx)(Ee,{scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(F.jsx)(me,{})]})]})]})}!function(){E.apply(this,arguments)}();var Fe=document.getElementById("root");b.a.render(Object(F.jsx)(u.StrictMode,{children:Object(F.jsx)(_e,{})}),Fe)}},[[73,1,2]]]);
//# sourceMappingURL=main.b0853d11.chunk.js.map