(this["webpackJsonpmask-mask8"]=this["webpackJsonpmask-mask8"]||[]).push([[0],{56:function(e,t){},57:function(e,t){},58:function(e,t){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);for(var r,i,a,c,o,s,u=n(3),l=n.n(u),f=n(41),b=n.n(f),j=n(12),h=n.n(j),d=n(14),g=n(42),m=n(0),p=0,O=0,x=[],y=20,v=0;v<y;v++)x[v]=0;var R=!0,M=new Event("browsRaised"),w=new Event("trackingReady"),k="webgl",I=1;function P(){return E.apply(this,arguments)}function E(){return(E=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=document.getElementById("video"),e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});case 3:return t=e.sent,o.srcObject=t,e.abrupt("return",new Promise((function(e){o.onloadedmetadata=function(){e(o)}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return T.apply(this,arguments)}function T(){return(T=Object(d.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.estimateFaces(o);case 2:t=e.sent,i.drawImage(o,0,0,a,c,0,0,s.width,s.height),t.length>0&&t.forEach((function(e){var t=e.scaledMesh;x[p]=t[257][1]-t[443][1],x[p]>O+.5?(i.fillStyle="#00ff00",R&&(R=!1,document.dispatchEvent(M))):(i.fillStyle="#ffffff",R=!0),++p>=y&&(p=0),O=0;for(var n=0;n<y;n++)O+=x[n];O/=y})),requestAnimationFrame(L);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(d.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Yb(k);case 2:return e.next=4,P();case 4:return o.play(),a=o.videoWidth,c=o.videoHeight,o.width=a,o.height=c,(s=document.getElementById("output")).width=a/4,s.height=c/4,document.querySelector(".canvas-wrapper").style="width: ".concat(a,"px; height: ").concat(c,"px"),(i=s.getContext("2d")).translate(s.width,0),i.scale(-1,1),i.fillStyle="#32EEDB",i.strokeStyle="#32EEDB",i.lineWidth=.5,e.next=22,g.a({maxFaces:I});case 22:r=e.sent,document.dispatchEvent(w),L();case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=n(13),_=n(7),C=function(e){var t=e.brightness,n=e.color;return Object(_.jsx)("rectAreaLight",{width:3,height:3,color:n,intensity:t,position:[-2,0,5],lookAt:[0,0,0],penumbra:1,castShadow:!0})},B=function(e){var t=e.brightness,n=e.color;return Object(_.jsx)("rectAreaLight",{width:3,height:3,intensity:t,color:n,position:[2,1,4],lookAt:[0,0,0],penumbra:2,castShadow:!0})},F=function(e){var t=e.brightness,n=e.color;return Object(_.jsx)("rectAreaLight",{width:2,height:2,intensity:t,color:n,position:[1,4,-2],rotation:[0,180,0],castShadow:!0})},G=n(10),W=n(43),U=n.p+"static/media/char_idle.b764698b.png",N=n.p+"static/media/char_blockL.cc6e41f4.png",D=n.p+"static/media/char_blockR.fb28e20b.png",q=n(1),J=(new q.TextureLoader).load(U),Y=(new q.TextureLoader).load(N),z=(new q.TextureLoader).load(D),H="splash",X="left",K=Object(W.a)((function(e){return{appState:H,setAppState:function(t){return e((function(e){return{appState:t}}))},timerRunning:!1,setTimerRunning:function(t){return e((function(e){return{timerRunning:t}}))},gaugeRunning:!1,setGaugeRunning:function(t){return e((function(e){return{gaugeRunning:t}}))},gaugeColor:"hotpink",setGaugeColor:function(t){return e((function(e){return{gaugeColor:t}}))},rapidFire:!1,setRapidFire:function(t){return e((function(e){return{rapidFire:t}}))},ballReady:!0,setBallReady:function(t){return e((function(e){return{ballReady:t}}))},gaugePosition:X,setGaugePosition:function(t){return e((function(e){return{gaugePosition:t}}))},timeLeft:30,resetTime:function(){return e((function(e){return{timeLeft:30}}))},decTime:function(){e((function(e){return{timeLeft:(e.timeLeft-.1).toFixed(1)}}))},points:0,resetPoints:function(){return e((function(e){return{points:e.points=0}}))},inc:function(){return e((function(e){return{points:e.points+2}}))},charTexture:J,setCharTexture:function(t){return e((function(e){return{charTexture:t}}))}}})),Q=n(66),V="playing",Z="end",$=function(e){var t=K((function(e){return[e.timeLeft,e.decTime,e.points,e.appState,e.setAppState,e.setGaugeRunning]})),n=Object(G.a)(t,6),r=n[0],i=n[1],a=n[2],c=n[3],o=n[4],s=n[5];return function(e,t){var n=Object(u.useRef)();Object(u.useEffect)((function(){n.current=e})),Object(u.useEffect)((function(){if(null!==t){var e=setInterval((function(){"undefined"!==typeof(null===n||void 0===n?void 0:n.current)&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){c===V&&(i(),r<=.1&&(o(Z),s(!1)))}),100),Object(_.jsx)("group",{position:[.5,3,0],children:Object(_.jsx)(Q.a,{fontSize:.7,color:"black",anchorX:"left",anchorY:"bottom",outlineWidth:.05,outlineColor:"#ffffff",children:"".concat(r,"\n").concat(a)})})},ee=n(11),te=n(16),ne=0;function re(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=K((function(e){return[e.inc,e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.setRapidFire,e.rapidFire]})),i=Object(G.a)(r,6),a=i[0],c=i[1],o=i[2],s=i[3],l=i[4],f=i[5],b=Object(A.c)(te.a,"/masketball_BallAnimW.glb"),j=b.nodes,h=b.materials,d=b.animations,g=Object(u.useRef)(),m=Object(u.useState)((function(){return new q.AnimationMixer})),p=Object(G.a)(m,1)[0];return Object(u.useEffect)((function(){return g.current={idle:p.clipAction(d[0],n.current)},g.current.idle.setLoop(q.LoopOnce),function(){return d.forEach((function(e){return p.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,t){o&&!f&&"center"===c&&se>=0&&(g.current.idle.reset(),g.current.idle.play(),se=-1,s("green"),setTimeout((function(){s("hotpink")}),200),setTimeout((function(){a()}),750),2===++ne&&(s("lightblue"),setTimeout((function(){s("lightblue")}),201),l(!0),fe=!1,le=!1,setTimeout((function(){l(!1),ne=0,le=!0}),3e3))),p.update(t)})),Object(_.jsx)("group",Object(ee.a)(Object(ee.a)({ref:n},t),{},{dispose:null,children:Object(_.jsx)("mesh",{name:"ball",geometry:j.ball.geometry,material:h.ball,rotation:[Math.PI/2,Math.PI/2,0]})}))}function ie(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=K((function(e){return[e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.rapidFire,e.setCharTexture]})),i=Object(G.a)(r,5),a=i[0],c=i[1],o=i[2],s=i[3],l=i[4],f=Object(A.c)(te.a,"/masketball_BallAnim3.glb"),b=f.nodes,j=f.materials,h=f.animations,d=Object(u.useRef)(),g=Object(u.useState)((function(){return new q.AnimationMixer})),m=Object(G.a)(g,1)[0];return Object(u.useEffect)((function(){return d.current={idle:m.clipAction(h[0],n.current)},d.current.idle.setLoop(q.LoopOnce),function(){return h.forEach((function(e){return m.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,t){c&&!s&&"left"===a&&se>=0&&(d.current.idle.reset(),d.current.idle.play(),se=-1,o("red"),setTimeout((function(){o("hotpink")}),200),setTimeout((function(){l(Y)}),200),setTimeout((function(){l(J)}),400),ne=0),m.update(t)})),Object(_.jsxs)("group",Object(ee.a)(Object(ee.a)({ref:n},t),{},{dispose:null,children:[Object(_.jsx)("group",{position:[-.83,28.21,154.68],children:Object(_.jsx)("group",{rotation:[-.02,0,0],scale:[1,1,1],children:Object(_.jsx)("group",{rotation:[0,Math.PI/2,0]})})}),Object(_.jsx)("mesh",{name:"ball",material:j.ball,geometry:b.ball.geometry,rotation:[-Math.PI/2,-Math.PI/2,0],scale:[1,1,1]})]}))}function ae(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=K((function(e){return[e.gaugePosition,e.gaugeRunning,e.setGaugeColor,e.rapidFire,e.setCharTexture]})),i=Object(G.a)(r,5),a=i[0],c=i[1],o=i[2],s=i[3],l=i[4],f=Object(A.c)(te.a,"/masketball_BallAnimLblock.glb"),b=f.nodes,j=f.materials,h=f.animations,d=Object(u.useRef)(),g=Object(u.useState)((function(){return new q.AnimationMixer})),m=Object(G.a)(g,1)[0];return Object(u.useEffect)((function(){return d.current={idle:m.clipAction(h[0],n.current)},d.current.idle.setLoop(q.LoopOnce),function(){return h.forEach((function(e){return m.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,t){c&&!s&&"right"===a&&se>=0&&(d.current.idle.reset(),d.current.idle.play(),se=-1,o("red"),setTimeout((function(){o("hotpink")}),200),setTimeout((function(){l(z)}),200),setTimeout((function(){l(J)}),400),ne=0),m.update(t)})),Object(_.jsxs)("group",Object(ee.a)(Object(ee.a)({ref:n},t),{},{dispose:null,children:[Object(_.jsx)("group",{position:[-.83,28.21,154.68],children:Object(_.jsx)("group",{rotation:[-.02,0,0],scale:[1,1,1],children:Object(_.jsx)("group",{rotation:[0,Math.PI/2,0]})})}),Object(_.jsx)("mesh",{name:"ball",material:j.ball,geometry:b.ball.geometry,rotation:[-Math.PI/2,-Math.PI/2,0],scale:[1,1,1]})]}))}function ce(e){var t=Object.assign({},e),n=Object(u.useRef)(),r=K((function(e){return[e.inc,e.rapidFire]})),i=Object(G.a)(r,2),a=i[0],c=i[1],o=Object(A.c)(te.a,"/masketball_BallAnimW.glb"),s=o.nodes,l=o.materials,f=o.animations,b=Object(u.useRef)(),j=Object(u.useState)((function(){return new q.AnimationMixer})),h=Object(G.a)(j,1)[0];return Object(u.useEffect)((function(){return b.current={idle:h.clipAction(f[0],n.current)},b.current.idle.setLoop(q.LoopOnce),function(){return f.forEach((function(e){return h.uncacheClip(e)}))}}),[]),Object(A.b)((function(e,n){c&&se===t.toast&&(b.current.idle.reset(),b.current.idle.play(),se=-1,setTimeout((function(){a()}),750)),h.update(n)})),Object(_.jsx)("group",Object(ee.a)(Object(ee.a)({ref:n},t),{},{dispose:null,children:Object(_.jsx)("mesh",{name:"ball",geometry:s.ball.geometry,material:l.ball,rotation:[Math.PI/2,Math.PI/2,0]})}))}var oe=0,se=-1;function ue(){return new Array(5).fill().map((function(e,t){return Object(_.jsx)(ce,{toast:t,scale:[.1,.1,.1],rotation:[0,Math.PI,0]},t)}))}var le=!0,fe=!1;function be(){var e=function(e){fe||(se=oe,++oe>=5&&(oe=0),le&&(fe=!0,setTimeout((function(){fe=!1}),1e3)))};return l.a.useEffect((function(){return document.addEventListener("browsRaised",e),function(){document.addEventListener("browsRaised",e)}}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(ie,{toast:0,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(_.jsx)(ae,{toast:0,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(_.jsx)(re,{toast:1,scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(_.jsx)(ue,{})]})}var je=n(65),he="left",de="center",ge="right",me=function(e){var t=K((function(e){return[e.setGaugePosition,e.gaugePosition,e.gaugeRunning,e.gaugeColor,e.rapidFire]})),n=Object(G.a)(t,5),r=n[0],i=n[1],a=n[2],c=n[3],o=n[4],s=Object(u.useRef)();return Object(A.b)((function(e){if(!0===a){if(o)s.current=0;else{var t=e.clock.getElapsedTime();s.current=Math.sin(2*t)}i!==de&&s.current>-.5&&s.current<.5?r(de):i!==he&&s.current>=.5?r(he):i!==ge&&s.current<=-.5&&r(ge)}})),Object(_.jsxs)("group",{ref:s,position:[0,0,1],children:[Object(_.jsx)(je.a,{args:[1.5,16],children:Object(_.jsx)(je.b,{args:[.4,.4],rotation:[0,0,.8],position:[0,1.45,.1],children:Object(_.jsx)("meshBasicMaterial",{attach:"material",color:c})})}),Object(_.jsxs)(je.a,{args:[1.1,16],position:[0,0,.2],rotation:[0,0,s.current],children:[Object(_.jsx)("meshBasicMaterial",{attach:"material",color:"blue"}),Object(_.jsx)(je.b,{args:[.2,.2],rotation:[0,0,.8],position:[0,1.45,.1],children:Object(_.jsx)("meshBasicMaterial",{attach:"material",color:"blue"})})]})]})},pe=n.p+"static/media/UI_Launch_BG.a0451e79.jpg",Oe=n.p+"static/media/UI_Launch_Inactive.78a02689.png",xe=n.p+"static/media/UI_PlayAgain_Inactive.b3defc2e.png",ye=n.p+"static/media/UI_Loading.93cf17ce.png",ve="playing",Re="end",Me=function(e){var t=K((function(e){return[e.setAppState,e.appState,e.setTimerRunning,e.resetTime,e.resetPoints,e.setGaugeRunning]})),n=Object(G.a)(t,6),r=n[0],i=n[1],a=n[2],c=n[3],o=n[4],s=n[5],f=Object(u.useState)(!1),b=Object(G.a)(f,2),j=b[0],h=b[1],d=function(e){h(!0)};l.a.useEffect((function(){return document.addEventListener("trackingReady",d),function(){document.addEventListener("trackingReady",d)}}),[]);var g=function(){r(ve),c(),o(),a(!0),s(!0)};return i===ve?null:i===Re?Object(_.jsx)("div",{className:"splash",children:Object(_.jsx)("img",{className:"button",src:xe,alt:"splash screen",onClick:function(){return g()}})}):Object(_.jsxs)("div",{className:"splash",children:[Object(_.jsx)("img",{src:pe,alt:"splash screen"}),Object(_.jsx)("img",{className:"button",src:j?Oe:ye,alt:"splash screen",onClick:function(){return g()}})]})};function we(e){var t=Object(u.useRef)(),n=Object(A.c)(te.a,"./m_Scene.glb"),r=n.nodes,i=n.materials;return Object(_.jsxs)("group",Object(ee.a)(Object(ee.a)({ref:t},e),{},{dispose:null,children:[Object(_.jsxs)("group",{position:[-.11,.54,-3.87],rotation:[Math.PI/2,0,Math.PI],scale:[.01,.01,.01],children:[Object(_.jsxs)("group",{position:[-10.26,-14.92,-52.54],rotation:[0,0,Math.PI],children:[Object(_.jsx)("mesh",{geometry:r.Mesh002.geometry,material:i.RoyalBlue}),Object(_.jsx)("mesh",{geometry:r.Mesh002_1.geometry,material:i.White}),Object(_.jsx)("mesh",{geometry:r.Mesh002_2.geometry,material:i.BG_logo})]}),Object(_.jsxs)("group",{position:[-10.64,-12.98,-18.84],rotation:[0,0,-Math.PI/2],children:[Object(_.jsx)("mesh",{geometry:r.Mesh.geometry,material:i.RoyalBlue}),Object(_.jsx)("mesh",{geometry:r.Mesh_1.geometry,material:i["RoyalBlue.001"]}),Object(_.jsx)("mesh",{geometry:r.net.geometry,material:i.White,position:[30.09,0,7.31]})]})]}),Object(_.jsx)("mesh",{geometry:r.floor.geometry,material:i.floor,position:[0,-.35,-1.76],rotation:[Math.PI/2,0,0],scale:[.01,.01,.01]}),Object(_.jsx)("mesh",{geometry:r.bg.geometry,material:i.bg,position:[0,1.19,-2.07],rotation:[Math.PI/2,0,1.61],scale:[.01,.01,.01]})]}))}var ke=n(67);function Ie(e){var t=K((function(e){return[e.charTexture]})),n=Object(G.a)(t,1)[0],r=Object(u.useRef)(),i=Object(ke.a)("./mblank_CharStill.glb").nodes;return Object(_.jsx)("group",Object(ee.a)(Object(ee.a)({ref:r},e),{},{dispose:null,children:Object(_.jsx)("mesh",{geometry:i.char_idle.geometry,position:[0,40.71,274.33],children:Object(_.jsx)("meshStandardMaterial",{attach:"material",map:n,transparent:!0})})}))}n(63);function Pe(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Me,{}),Object(_.jsxs)(A.a,{camera:{position:[0,2,4]},onCreated:function(e){e.camera.lookAt(0,2,0)},children:[Object(_.jsx)($,{}),Object(_.jsx)("ambientLight",{intensity:.5}),Object(_.jsx)(C,{brightness:5.6,color:"#ffbdf4"}),Object(_.jsx)(B,{brightness:2.6,color:"#bdefff"}),Object(_.jsx)(F,{brightness:54,color:"#fff"}),Object(_.jsxs)(u.Suspense,{fallback:null,children:[Object(_.jsx)(be,{}),Object(_.jsx)(we,{scale:[10,10,10]}),Object(_.jsx)(Ie,{scale:[.1,.1,.1],rotation:[0,Math.PI,0]}),Object(_.jsx)(me,{})]})]})]})}!function(){S.apply(this,arguments)}();var Ee=document.getElementById("root");b.a.render(Object(_.jsx)(u.StrictMode,{children:Object(_.jsx)(Pe,{})}),Ee)}},[[64,1,2]]]);
//# sourceMappingURL=main.97a9bdb0.chunk.js.map